/*
 * AUTOMATICALLY GENERATED FILE - DO NOT EDIT
 */

// Generated from /home/duck/gitclones/erpc/erpcgen/src/templates/c_client_source.template
extern const char * const kCClientSource;

const char * const kCClientSource = 
"{% if mlComment != \"\"%}\n"
"{$mlComment}\n"
"\n"
"{% endif %}\n"
"{$commonHeader()}\n"
"\n"
"#include \"erpc_client_manager.h\"\n"
"#include \"erpc_port.h\"\n"
"#include \"{$codecHeader}\"\n"
"extern \"C\"\n"
"{\n"
"#include \"{$commonHeaderName}.h\"\n"
"{% if groupNames %}\n"
"// import callbacks declaration from other groups\n"
"{%  for name in groupNames if name != group.name %}\n"
"#include \"{$outputFilename}_{$name}.h\"\n"
"{%  endfor %}\n"
"{% endif %}\n"
"}\n"
"\n"
"{$checkVersion()}\n"
"{$>checkCrc()}\n"
"using namespace erpc;\n"
"using namespace std;\n"
"\n"
"extern ClientManager *g_client;\n"
"{$generateCrcVariable()}\n"
"{$> setSharedMemAddresses()}\n"
"{% if unitTest %}\n"
"{$> callbackTable(functions)}\n"
"{% endif %}\n"
"{$> constantsDefinitions(consts)}\n"
"{$> symbolHeader(group.symbolsMap.symbolsToServer, \"serial\", \"def\")}\n"
"{$> symbolSource(group.symbolsMap.symbolsToServer, \"serial\", \"def\")}\n"
"{$> symbolHeader(group.symbolsMap.symbolsToClient, \"deserial\", \"def\")}\n"
"{$> symbolSource(group.symbolsMap.symbolsToClient, \"deserial\", \"def\")}\n"
"{$> symbolHeader(group.symbolsMap.symbolsToServer, \"serial\", \"noSharedMem\")}\n"
"{$> symbolSource(group.symbolsMap.symbolsToServer, \"serial\", \"noSharedMem\")}\n"
"{$> symbolHeader(group.symbolsMap.symbolsToClient, \"deserial\", \"noSharedMem\")}\n"
"{$> symbolSource(group.symbolsMap.symbolsToClient, \"deserial\", \"noSharedMem\")}\n"
"{% def clientShimCode(fn, serverIDName, functionIDName) ------------------------- clientShimCode(fn, serverIDName, functionIDName) %}\n"
"{% set clientIndent = \"\" >%}\n"
"{% if generateErrorChecks %}\n"
"    erpc_status_t err = kErpcStatus_Success;\n"
"\n"
"{% endif -- generateErrorChecks %}\n"
"{% if fn.returnValue.type.isNotVoid %}\n"
"    {$fn.returnValue.resultVariable}{% if fn.returnValue.isNullReturnType %} = NULL{%endif%};\n"
"\n"
"#if ERPC_PRE_POST_ACTION\n"
"    pre_post_action_cb preCB = g_client->getPreCB();\n"
"    if (preCB)\n"
"    {\n"
"        preCB();\n"
"    }\n"
"#endif\n"
"\n"
"{% endif -- isNotVoid %}\n"
"    // Get a new request.\n"
"{% if !fn.isReturnValue %}\n"
"    RequestContext request = g_client->createRequest(true);\n"
"{% else %}\n"
"    RequestContext request = g_client->createRequest(false);\n"
"{% endif -- isReturnValue %}\n"
"\n"
"    // Encode the request.\n"
"{% if codecClass == \"Codec\" %}\n"
"    {$codecClass} * codec = request.getCodec();\n"
"{% else %}\n"
"    {$codecClass} * codec = static_cast<{$codecClass} *>(request.getCodec());\n"
"{% endif %}\n"
"\n"
"{% if generateAllocErrorChecks %}\n"
"{%  set clientIndent = \"    \" >%}\n"
"    if (codec == NULL)\n"
"    {\n"
"        err = kErpcStatus_MemoryError;\n"
"    }\n"
"    else\n"
"    {\n"
"{% endif -- generateErrorChecks %}\n"
"{$clientIndent}    codec->startWriteMessage({% if not fn.isReturnValue %}kOnewayMessage{% else %}kInvocationMessage{% endif %}, {$serverIDName}, {$functionIDName}, request.getSequence());\n"
"\n"
"{% if fn.isSendValue %}\n"
"{%  for param in fn.parameters if (param.serializedDirection == \"\" || param.serializedDirection == OutDirection || param.referencedName != \"\") %}\n"
"{%   if param.isNullable %}\n"
"{$ addIndent(clientIndent & \"    \", f_paramIsNullableEncode(param))}\n"
"\n"
"{%   else -- isNullable %}\n"
"{%    if param.direction != OutDirection %}\n"
"{$addIndent(clientIndent & \"    \", param.coderCall.encode(param.coderCall))}\n"
"\n"
"{%    endif -- param != OutDirection %}\n"
"{%   endif -- isNullable %}\n"
"{%  endfor -- fn parameters %}\n"
"{% endif -- isSendValue %}\n"
"{$clientIndent}    // Send message to server\n"
"{$clientIndent}    // Codec status is checked inside this function.\n"
"{$clientIndent}    g_client->performRequest(request);\n"
"{% if fn.isReturnValue %}\n"
"{%  if fn.needTempVariableClient %}\n"
"\n"
"{$clientIndent}    int32_t _tmp_local;\n"
"{%  endif %}\n"
"{%  for param in fn.parametersToClient if (param.serializedDirection == \"\" || param.serializedDirection == InDirection || param.referencedName != \"\") %}\n"
"\n"
"{%   if param.isNullable %}\n"
"{$clientIndent}    if ({$param.nullableName} != NULL{% if ((source == \"client\") && (param.direction != ReturnDirection) && (empty(param.lengthName) == false)) %} && {$param.lengthName} != NULL{% endif %})\n"
"{$clientIndent}    {\n"
"{$addIndent(clientIndent & \"        \", param.coderCall.decode(param.coderCall))}\n"
"        }\n"
"{%   else -- notNullable %}\n"
"{$addIndent(clientIndent & \"    \", param.coderCall.decode(param.coderCall))}\n"
"{%   endif -- isNullable %}\n"
"{%  endfor -- fn parametersToClient %}\n"
"{%  if fn.returnValue.type.isNotVoid %}\n"
"\n"
"{%   if fn.returnValue.isNullable %}\n"
"{$clientIndent}    bool isNull;\n"
"{$addIndent(clientIndent & \"    \", f_paramIsNullableDecode(fn.returnValue))}\n"
"{%   else -- isNullable %}\n"
"{$> addIndent(clientIndent & \"    \", allocMem(fn.returnValue.firstAlloc))}\n"
"{$addIndent(clientIndent & \"    \", fn.returnValue.coderCall.decode(fn.returnValue.coderCall))}\n"
"{%   endif -- isNullable %}\n"
"{%  endif -- isNotVoid %}\n"
"{% endif -- isReturnValue %}\n"
"{% if generateErrorChecks %}\n"
"\n"
"{$clientIndent}    err = codec->getStatus();\n"
"{% endif -- generateErrorChecks %}\n"
"{%    if generateAllocErrorChecks %}\n"
"    }\n"
"{% endif -- generateAllocErrorChecks %}\n"
"\n"
"    // Dispose of the request.\n"
"    g_client->releaseRequest(request);\n"
"{% if generateErrorChecks %}\n"
"\n"
"    // Invoke error handler callback function\n"
"    g_client->callErrorHandler(err, {$functionIDName});\n"
"{% endif -- generateErrorChecks %}\n"
"{% if generateErrorChecks && fn.returnValue.type.isNotVoid %}\n"
"\n"
"#if ERPC_PRE_POST_ACTION\n"
"    pre_post_action_cb postCB = g_client->getPostCB();\n"
"    if (postCB)\n"
"    {\n"
"        postCB();\n"
"    }\n"
"#endif\n"
"\n"
"{%  if empty(fn.returnValue.errorReturnValue) == false && fn.returnValue.isNullReturnType == false %}\n"
"\n"
"    if (err != kErpcStatus_Success)\n"
"    {\n"
"        result = {$fn.returnValue.errorReturnValue};\n"
"    }\n"
"{%  endif %}\n"
"{% endif -- generateErrorChecks %}\n"
"\n"
"    return{% if fn.returnValue.type.isNotVoid %} result{% endif -- isNotVoid %};\n"
"{% enddef --------------------------------------------------------------------------------- clientShimCode(fn, serverIDName, functionIDName) %}\n"
"{% for callbackType in group.callbacks %}\n"
"// Common function for serializing and deserializing callback functions of same type.\n"
"static {$callbackType.prototype};\n"
"\n"
"{% endfor %}\n"
"{% for callbackType in group.callbacks %}\n"
"// Common function for serializing and deserializing callback functions of same type.\n"
"static {$callbackType.prototype}\n"
"{\n"
"{$ clientShimCode(callbackType, \"serviceID\", \"functionID\") >}\n"
"}\n"
"\n"
"{% endfor %}\n"
"{% for iface in group.interfaces %}\n"
"{%  for fn in iface.functions %}\n"
"\n"
"// {$iface.name} interface {$fn.name} function client shim.\n"
"{$fn.prototype}\n"
"{\n"
"{%   if fn.isCallback %}\n"
"    {% if fn.returnValue.type.isNotVoid %}return {% endif %}{$fn.callbackFName}(k{$iface.name}_service_id, k{$iface.name}_{$fn.name}_id{% for param in fn.parameters %}, {$param.name}{% endfor %});\n"
"{%   else -- fn.isCallback >%}\n"
"{$ clientShimCode(fn, \"k\"& iface.name & \"_service_id\", \"k\" & iface.name & \"_\" & fn.name & \"_id\") >}\n"
"{%   endif -- fn.isCallback >%}\n"
"}\n"
"{%  endfor -- fn %}\n"
"{% endfor -- iface %}\n"
;

